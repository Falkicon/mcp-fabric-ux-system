# Generating API Documentation

This document explains the process for generating and updating the API reference documentation for Fluent UI Web Components v3.

## Overview

The API documentation is automatically generated from TSDoc comments in the TypeScript source code files (`.ts`). We use two primary tools from the Rush Stack ecosystem:

1.  **`@microsoft/api-extractor`**: This tool analyzes the exported API surface of the package, validates TSDoc comments, and generates an API report file (`.api.md`) and intermediate API model files (`.api.json`).
2.  **`@microsoft/api-documenter`**: This tool takes the `.api.json` model file generated by `api-extractor` and produces markdown documentation files.

## 1. Writing TSDoc Comments

API documentation originates from specially formatted comment blocks (`/** ... */`) placed directly above exported classes, interfaces, methods, properties, functions, etc., in the source code.

Follow the [TSDoc standard](https://tsdoc.org/) for syntax.

**Example:**

```typescript
/**
 * Represents a Fluent UI Button component.
 *
 * @public // Marks the component as part of the public API
 * @remarks
 * Detailed usage notes or implementation details can go here.
 * @example
 * ```html
 * <fluent-button appearance="primary">Click Me</fluent-button>
 * ```
 */
export class Button extends FASTElement {
    /**
     * Defines the visual appearance of the button.
     *
     * @public
     * @defaultValue 'neutral'
     */
    @attr appearance?: ButtonAppearance;

    // ... other properties and methods
}
```

*   Use tags like `@public`, `@internal`, `@param`, `@returns`, `@remarks`, `@defaultValue`, `@example` to structure the documentation.
*   Only items marked `@public` (or implicitly public) will be included in the documentation.

## 2. Configuration (`api-extractor.json`)

The behavior of `api-extractor` is controlled by the `api-extractor.json` file located in the package root (`fluentui/packages/web-components/`). Key sections include:

*   `projectFolder`: The root of the package.
*   `mainEntryPointFilePath`: The main entry point file (e.g., `<projectFolder>/dist/dts/index.d.ts`) containing the rolled-up type declarations for the package.
*   `apiReport`: Configures the generation of the `.api.md` report file, including its location (`reportFolder`) and filename (`reportFileName`). This file tracks changes to the public API surface.
*   `docModel`: Configures the generation of the `.api.json` model file used by `api-documenter`.
*   `dtsRollup`: Configures the creation of a single `.d.ts` file for the package.
*   `messages`: Allows customization of logging levels for different TSDoc or API errors/warnings.

## 3. Generating the Documentation

The generation process typically involves two steps, often combined into npm scripts defined in `package.json`:

1.  **Run `api-extractor`**: This generates/updates the API report (`<projectFolder>/etc/<package-name>.api.md`) and the API model (`<projectFolder>/temp/<package-name>.api.json`).

    ```bash
    # Example command (check your package.json for the exact script)
    yarn api-extractor run --local --verbose
    # or potentially a script like:
    yarn build:api
    ```

2.  **Run `api-documenter`**: This reads the `.api.json` model and generates the markdown documentation.

    ```bash
    # Example command (check your package.json for the exact script)
    yarn api-documenter markdown --input-folder ./temp --output-folder ./docs/api
    # or potentially a script like:
    yarn docs:api
    ```

**Note:** The exact script names (`build:api`, `docs:api`) and output folders (`./docs/api`) might differ. Please **check your project's `package.json`** for the correct scripts and configurations.

## 4. API Report (`.api.md`)

The `*.api.md` file (e.g., `fluentui/packages/web-components/etc/web-components.api.md`) serves as a snapshot of the package's public API surface. When you make changes to exported APIs or their TSDoc comments, `api-extractor` will detect these changes.

*   If the changes are intentional (new features, documented breaking changes), you need to **update the report file** by running the `api-extractor` command again, often with a `--local` flag or by copying the temporary report file over the existing one.
*   This updated report file should be **committed to version control** along with the code changes.
*   This mechanism helps prevent accidental breaking changes to the public API.

## Summary

- Write TSDoc comments in source code.
- Run `api-extractor` (e.g., `yarn build:api`) to update the API report and generate the model.
- Review and commit changes to the `.api.md` file.
- Run `api-documenter` (e.g., `yarn docs:api`) to generate the final markdown documentation.
